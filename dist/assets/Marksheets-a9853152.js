import{j as e}from"./ui-aae23e34.js";import{r as d}from"./vendor-280e31ee.js";import{L as c}from"./router-b40667b9.js";import{a as j,B as x,I as k,T as v,d as y}from"./index-35e734d6.js";const T=()=>{const{setError:l}=j(),[a,n]=d.useState([]),[h,o]=d.useState(!0),[r,i]=d.useState(""),[u,m]=d.useState([]);d.useEffect(()=>{g()},[]),d.useEffect(()=>{if(r){const t=a.filter(s=>s.studentName.toLowerCase().includes(r.toLowerCase())||s.rollNumber.includes(r)||s.examType.toLowerCase().includes(r.toLowerCase()));m(t)}else m(a)},[a,r]);const g=async()=>{try{o(!0),n([{id:"1",rollNumber:"2024001",studentName:"John Doe",fatherName:"Robert Doe",motherName:"Jane Doe",dob:"2010-05-15",currentClass:"10",bloodGroup:"O+",address:"123 Main St, City",phoneNumber:"1234567890",photo:void 0,examType:"Half-Yearly",academicYear:"2024-25",subjects:[{id:"1",name:"MATHEMATICS",code:"041",marks:85,maxMarks:100},{id:"2",name:"PHYSICS",code:"042",marks:78,maxMarks:100}],totalMarks:163,maxTotalMarks:200,percentage:81.5,rank:1,promotionStatus:"Promoted",createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}])}catch{l("Failed to fetch marksheets")}finally{o(!1)}},N=async t=>{if(window.confirm("Are you sure you want to delete this marksheet?"))try{n(s=>s.filter(p=>p.rollNumber!==t))}catch{l("Failed to delete marksheet")}},f=[{key:"studentName",title:"Student",dataIndex:"studentName",render:(t,s)=>e.jsxs("div",{className:"flex items-center",children:[s.photo?e.jsx("img",{className:"h-10 w-10 rounded-full mr-3",src:s.photo,alt:s.studentName}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.studentName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.studentName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.rollNumber})]})]})},{key:"examType",title:"Exam Type",dataIndex:"examType"},{key:"academicYear",title:"Academic Year",dataIndex:"academicYear"},{key:"percentage",title:"Percentage",dataIndex:"percentage",render:t=>y(t)},{key:"rank",title:"Rank",dataIndex:"rank",render:t=>t?`#${t}`:"N/A"},{key:"promotionStatus",title:"Status",dataIndex:"promotionStatus",render:t=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t==="Promoted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t})},{key:"id",title:"Actions",dataIndex:"id",render:(t,s)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{to:`/view-marksheet/${s.rollNumber}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"View"}),e.jsx("button",{onClick:()=>N(s.rollNumber),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Delete"})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Marksheets"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage student marksheets"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(c,{to:"/generate-marksheet",children:e.jsxs(x,{variant:"primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Generate Marksheet"]})})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"Search marksheets by student name, roll number, or exam type...",value:r,onChange:t=>i(t.target.value)})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(x,{variant:"secondary",onClick:()=>i(""),disabled:!r,children:"Clear"})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx(v,{data:u,columns:f,loading:h,emptyMessage:"No marksheets found"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Marksheets"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(t=>t.promotionStatus==="Promoted").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Promoted Students"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.filter(t=>t.promotionStatus==="Not Promoted").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Not Promoted"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[a.length>0?(a.reduce((t,s)=>t+s.percentage,0)/a.length).toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Average Percentage"})]})]})]})};export{T as default};
