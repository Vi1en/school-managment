import{j as e}from"./ui-aae23e34.js";import{r as l}from"./vendor-280e31ee.js";import{L as n}from"./router-b40667b9.js";import{u as g,a as p,B as c,I as v,T as y,g as w,c as o}from"./index-af325331.js";const I=()=>{const{students:a,fetchStudents:i,deleteStudent:x,isLoading:u}=g(),{setError:h,clearError:b}=p(),[d,r]=l.useState(""),[f,m]=l.useState([]);l.useEffect(()=>{i()},[i]),l.useEffect(()=>{if(d){const t=a.filter(s=>s.studentName.toLowerCase().includes(d.toLowerCase())||s.admissionNumber.includes(d)||s.currentClass.includes(d));m(t)}else m(a)},[a,d]);const j=async t=>{if(window.confirm("Are you sure you want to delete this student?")){const s=await x(t);s.success||h(s.error||"Failed to delete student")}},N=[{key:"studentName",title:"Student",dataIndex:"studentName",render:(t,s)=>e.jsxs("div",{className:"flex items-center",children:[s.photo?e.jsx("img",{className:"h-10 w-10 rounded-full mr-3",src:s.photo,alt:s.studentName}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.studentName.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.studentName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.admissionNumber})]})]})},{key:"currentClass",title:"Class",dataIndex:"currentClass",render:t=>`Class ${t}`},{key:"phoneNumber",title:"Phone",dataIndex:"phoneNumber"},{key:"feeDetails",title:"Fee Status",dataIndex:"feeDetails",render:t=>e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(t.paymentStatus)}`,children:t.paymentStatus.toUpperCase()})},{key:"feeDetails",title:"Amount Paid",dataIndex:"feeDetails",render:t=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o(t.amountPaid)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["of ",o(t.totalFee)]})]})},{key:"id",title:"Actions",dataIndex:"id",render:(t,s)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{to:`/student/${s.admissionNumber}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"View"}),e.jsx(n,{to:`/edit-student/${s.admissionNumber}`,className:"text-green-600 hover:text-green-900 text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>j(s.id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Delete"})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Students"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage student records and information"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(n,{to:"/add-student",children:e.jsxs(c,{variant:"primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Student"]})})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(v,{placeholder:"Search students by name, admission number, or class...",value:d,onChange:t=>r(t.target.value)})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(c,{variant:"secondary",onClick:()=>r(""),disabled:!d,children:"Clear"})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx(y,{data:f,columns:N,loading:u,emptyMessage:"No students found"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Students"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(t=>t.feeDetails.paymentStatus==="paid").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Paid Students"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.filter(t=>t.feeDetails.paymentStatus==="partial").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Partial Paid"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.filter(t=>t.feeDetails.paymentStatus==="unpaid").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Unpaid Students"})]})]})]})};export{I as default};
