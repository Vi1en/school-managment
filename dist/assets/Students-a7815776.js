import{j as e}from"./ui-aae23e34.js";import{r as l}from"./vendor-280e31ee.js";import{L as d}from"./router-b40667b9.js";import{u as w,a as b,B as h,I as v,T as S,g as k,c as u}from"./index-81314116.js";const L=()=>{const{students:a,fetchStudents:m,deleteStudent:f,isLoading:N}=w(),{setError:j,clearError:C}=b(),[n,r]=l.useState(""),[g,x]=l.useState([]);l.useEffect(()=>{m()},[m]),l.useEffect(()=>{if(n){const s=a.filter(t=>{var i,o,c;return t&&(((i=t.studentName)==null?void 0:i.toLowerCase().includes(n.toLowerCase()))||!1||((o=t.admissionNumber)==null?void 0:o.includes(n))||!1||((c=t.currentClass)==null?void 0:c.includes(n)))||!1});x(s)}else x(a||[])},[a,n]);const p=async s=>{if(window.confirm("Are you sure you want to delete this student?")){const t=await f(s);t.success||j(t.error||"Failed to delete student")}},y=[{key:"studentName",title:"Student",dataIndex:"studentName",render:(s,t)=>{var i;return e.jsxs("div",{className:"flex items-center",children:[t!=null&&t.photo?e.jsx("img",{className:"h-10 w-10 rounded-full mr-3",src:t.photo,alt:t.studentName||"Student"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:((i=t==null?void 0:t.studentName)==null?void 0:i.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(t==null?void 0:t.studentName)||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500",children:(t==null?void 0:t.admissionNumber)||"N/A"})]})]})}},{key:"currentClass",title:"Class",dataIndex:"currentClass",render:s=>`Class ${s||"N/A"}`},{key:"phoneNumber",title:"Phone",dataIndex:"phoneNumber"},{key:"feeDetails",title:"Fee Status",dataIndex:"feeDetails",render:s=>{var t;return e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(s==null?void 0:s.paymentStatus)}`,children:((t=s==null?void 0:s.paymentStatus)==null?void 0:t.toUpperCase())||"UNKNOWN"})}},{key:"feeDetails",title:"Amount Paid",dataIndex:"feeDetails",render:s=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:u((s==null?void 0:s.amountPaid)||0)}),e.jsxs("div",{className:"text-sm text-gray-500",children:["of ",u((s==null?void 0:s.totalFee)||0)]})]})},{key:"id",title:"Actions",dataIndex:"id",render:(s,t)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{to:`/student/${(t==null?void 0:t.admissionNumber)||"unknown"}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"View"}),e.jsx(d,{to:`/edit-student/${(t==null?void 0:t.admissionNumber)||"unknown"}`,className:"text-green-600 hover:text-green-900 text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>p((t==null?void 0:t.id)||""),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Delete"})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Students"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage student records and information"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(d,{to:"/add-student",children:e.jsxs(h,{variant:"primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Student"]})})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(v,{placeholder:"Search students by name, admission number, or class...",value:n,onChange:s=>r(s.target.value)})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(h,{variant:"secondary",onClick:()=>r(""),disabled:!n,children:"Clear"})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsx(S,{data:g,columns:y,loading:N,emptyMessage:"No students found"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(a==null?void 0:a.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Students"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(a==null?void 0:a.filter(s=>{var t;return((t=s==null?void 0:s.feeDetails)==null?void 0:t.paymentStatus)==="paid"}).length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Paid Students"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(a==null?void 0:a.filter(s=>{var t;return((t=s==null?void 0:s.feeDetails)==null?void 0:t.paymentStatus)==="partial"}).length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Partial Paid"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:(a==null?void 0:a.filter(s=>{var t;return((t=s==null?void 0:s.feeDetails)==null?void 0:t.paymentStatus)==="unpaid"}).length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Unpaid Students"})]})]})]})};export{L as default};
